{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[15],{RXBc:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"__N_SSP\",(function(){return O}));var c=n(\"q1tI\"),i=n(\"/MKj\"),a=n(\"1kws\"),r=n(\"ODXe\"),o=n(\"Vl3Y\"),l=n(\"5rEg\"),s=n(\"2/Rp\"),u=n(\"Tgth\"),d=n(\"teGV\"),j=n(\"oHge\"),f=n(\"nKUr\"),b=function(){var e=Object(i.c)((function(e){return e.post})),t=e.imagePaths,n=e.addPostDone,a=e.addPostLoading,b=Object(i.b)(),p=Object(u.a)(\"\"),O=Object(r.a)(p,3),h=O[0],m=O[1],g=O[2];Object(c.useEffect)((function(){n&&g(\"\")}),[n]);var w=Object(c.useCallback)((function(){if(!h||!h.trim())return alert(\"\\uac8c\\uc2dc\\uae00\\uc744 \\uc791\\uc131\\ud558\\uc138\\uc694.\");var e=new FormData;return t.forEach((function(t){e.append(\"image\",t)})),e.append(\"content\",h),b({type:d.e,data:e})}),[h,t]),v=Object(c.useRef)(),x=Object(c.useCallback)((function(){v.current.click()}),[v.current]),E=Object(c.useCallback)((function(e){var t=new FormData;[].forEach.call(e.target.files,(function(e){t.append(\"image\",e)})),b({type:d.G,data:t})})),y=Object(c.useCallback)((function(e){return function(){b({type:d.y,data:e})}}));return Object(f.jsxs)(o.a,{style:{margin:\"10px 0 20px\"},encType:\"multipart/form-data\",onFinish:w,children:[Object(f.jsx)(l.a.TextArea,{value:h,onChange:m,maxLength:140,placeholder:\"\\uc5b4\\ub5a4 \\uc2e0\\uae30\\ud55c \\uc77c\\uc774 \\uc788\\uc5c8\\ub098\\uc694?\"}),Object(f.jsxs)(\"div\",{children:[Object(f.jsx)(\"input\",{type:\"file\",name:\"image\",multiple:!0,hidden:!0,ref:v,onChange:E}),Object(f.jsx)(s.a,{onClick:x,children:\"\\uc774\\ubbf8\\uc9c0 \\uc5c5\\ub85c\\ub4dc\"}),Object(f.jsx)(s.a,{type:\"primary\",style:{float:\"right\"},htmlType:\"submit\",loading:a,children:\"\\uca31\\uca31\"})]}),Object(f.jsx)(\"div\",{children:t.map((function(e,t){return Object(f.jsxs)(\"div\",{style:{display:\"inline-block\"},children:[Object(f.jsx)(\"img\",{src:\"\".concat(j.a,\"/\").concat(e),style:{width:\"200px\"},alt:e}),Object(f.jsx)(\"div\",{children:Object(f.jsx)(s.a,{onClick:y(t),children:\"\\uc81c\\uac70\"})})]},e)}))})]})},p=n(\"SfDe\"),O=!0;t.default=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.user})).me,n=Object(i.c)((function(e){return e.post})),r=n.mainPosts,o=n.hasMorePost,l=n.loadPostsLoading,s=n.retweetError;return Object(c.useEffect)((function(){s&&alert(s)}),[s]),Object(c.useEffect)((function(){function t(){if(window.scrollY+document.documentElement.clientHeight>document.documentElement.scrollHeight-200&&o&&!l){var t,n=null===(t=r[r.length-1])||void 0===t?void 0:t.id;console.log(n),e({type:d.n,lastId:n})}}return window.addEventListener(\"scroll\",t),function(){window.removeEventListener(\"scroll\",t)}}),[o,l,r]),Object(f.jsxs)(a.a,{children:[t&&Object(f.jsx)(b,{}),r.map((function(e){return Object(f.jsx)(p.a,{post:e},e.id)}))]})}},vlRD:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/\",function(){return n(\"RXBc\")}])}},[[\"vlRD\",0,2,5,7,1,3,4,6,8]]]);","map":{"version":3,"sources":["static/chunks/pages/index-34f9c8d1ba8c4b0f226d.js"],"names":["_N_E","window","push","RXBc","module","__webpack_exports__","__webpack_require__","r","d","__N_SSP","react","es","AppLayout","slicedToArray","es_form","input","es_button","useInput","reducers_post","config","jsx_runtime","components_PostForm","_useSelector","Object","state","post","imagePaths","addPostDone","addPostLoading","dispatch","_useInput","_useInput2","text","onChangeText","setText","onSubmit","trim","alert","formData","FormData","forEach","p","append","type","data","imageInput","onClickImageUpload","current","click","onChangeImages","e","imageFormData","call","target","files","f","onRemoveImage","index","style","margin","encType","onFinish","children","TextArea","value","onChange","maxLength","placeholder","name","multiple","hidden","ref","onClick","float","htmlType","loading","map","v","i","display","src","concat","width","alt","PostCard","me","user","_useSelector2","mainPosts","hasMorePost","loadPostsLoading","retweetError","onScroll","scrollY","document","documentElement","clientHeight","scrollHeight","_mainPosts","lastId","length","id","console","log","addEventListener","removeEventListener","vlRD","exports","__NEXT_P"],"mappings":"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"},"extractedComments":[]}